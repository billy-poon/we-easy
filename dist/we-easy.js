!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e,t){return Object.assign({},e,t)},i=function(e,t){let n=[e,t].filter(Boolean);return n.length?(n.forEach(e=>{if(e&&"function"!=typeof e)throw new Error('The "compute" property value must be a function.')}),function(){let e=Array.from(arguments);return n.reduce((t,n)=>{let r=n.apply(this,e);if(r){if("object"!=typeof r)throw new Error('The "compute" function must return an object value.');t=Object.assign(t,r)}return t},{})}):()=>{}},o=function(e,t){return function(){let n=arguments,r=e=>{let t=typeof e;if("function"===t)return e.apply(this,n);if("string"===t)return r(this[t]);if(Array.isArray(e)){let t;return e.forEach(e=>t=r(e)),t}},i=[];return t&&i.push(t),e&&i.push(e),r(i)}};var a=function(e,t){let n={};return e&&e.forEach(e=>(function(e,t){return Object.keys(t).forEach(n=>{let a=t[n];"compute"===n?e[n]=i(a,e[n]):"function"==typeof a?e[n]=o(a,e[n]):"object"==typeof a&&(e[n]=r(a,e[n]))}),e})(n,function(e,t){return e=Object.assign({},e),t&&Object.keys(t).forEach(n=>{let r=e[n];if(void 0!==r){let i=t[n];e[i]=r,delete e[n]}}),e}(e,t))),n},c=function(){if(!this.$getOption)return;let{mounted:e}=this.$getOption();e&&e.call(this)},s={created:function(){let{beforeMount:e}=this.$getOption();e&&e.call(this)}};const f={created:"onLaunch"},u={created(){let e=this;Object.defineProperty(wx,"$app",{get:()=>e}),Object.defineProperties(this,{$pages:{get:()=>getCurrentPages()},$page:{get:()=>getCurrentPages().pop()}})},onShow(){this.$$mounted||(Object.defineProperty(this,"$$mounted",{get:()=>!0}),c.call(this))}},l=[];function h(e){let t=[u,...l,...(e=e||{}).mixins||[],e,s],n=a(t,f),{methods:r}=n;r&&delete(n={...n,...r}).methods,n.$getOption=(()=>n);let{beforeCreate:i}=n;return"function"==typeof i&&i(n),App(n)}Object.defineProperty(h,"mixin",{get:()=>e=>l.push(e)}),Object.defineProperty(App,"define",{get:()=>h});App;const p=new Set(["string","number","boolean","undefined","symbol"]),d=new Set([null]);function y(e){return p.has(typeof e)||d.has(e)}function b(e,t,n=!0){if(y(e)||y(t))return function(e,t){return e===t?void 0:e}(e,t);if(Array.isArray(e)||Array.isArray(t))return function(e,t,n){if(!e||!t)return e;if(e.length!==t.length)return e;let r=Object.keys(e),i=new Set(Object.keys(t));return r.length!=i.size?e:r.every(r=>!!i.has(r)&&void 0===b(e[r],t[r],n))?void 0:e}(e,t,n);let r={},i=!1;return Object.keys(e).forEach(o=>{let a=e[o],c=t[o];a!==c&&(n&&void 0===b(a,c,!0)||(i=!0,r[o]=a))}),i?r:void 0}var g=b,m=function(e,t,n){return setTimeout(r=>{let i=e.call(t);n&&n.call(t,i)},0)};let O=0;var j={created:function(){let e=++O;Object.defineProperty(this,"$uid",{get:()=>e});let{$getOption:t,setData:n}=this;if(!t||!n)return;let{beforeUpdate:r,updated:i}=this.$getOption(),o=null,a=e=>{i&&(e=e||this.data,o||(o={},m(e=>{let t=o;o=null,i.call(this,t)})),Object.assign(o,e))};Object.defineProperty(this,"$notifyUpdated",{get:()=>a});let c=(e,t)=>{r&&r.call(this,e),n.call(this,e,t),this.$updateDataProxify&&this.$updateDataProxify(e),a(e)},s=null,f=[],u=(e,t)=>{s||(s={},m(e=>{let t=s,n=f;s=null,f=[];let r=g(t,this.data);void 0!==r&&c(r,function(){let e=arguments;n.forEach(t=>t.apply(this,e))}.bind(this))})),Object.assign(s,e),t&&f.push(t)};Object.defineProperty(this,"setData",{get(){return function(e,t,n=!1){e&&(n?c:u)(e,t)}.bind(this)}})},mounted:c};const P={created:"onLoad",mounted:"onReady"},v=[];function $(e){let t=[j,...v,...(e=e||{}).mixins||[],e,s],n=a(t,P),{methods:r}=n;r&&delete(n={...n,...r}).methods,n.$getOption=(()=>n);let{beforeCreate:i}=n;return"function"==typeof i&&i(n),Page(n)}Object.defineProperty($,"mixin",{get:()=>e=>v.push(e)}),Object.defineProperty(Page,"define",{get:()=>$});Page;const w={props:"properties",mounted:"ready"},E=[],x={beforeCreate(e){let{properties:t,watch:n,compute:r}=e;t&&(n||r)&&Object.keys(t).forEach(e=>{let n=t[e];if(n){"object"!=typeof n&&(n=t[e]={type:n});let{observer:r}=n;n.observer=((e,t)=>(function(n){"string"==typeof t&&(t=this[t]),t&&t.apply(this,arguments);let r={};r[e]=n,this.$notifyUpdated(r)}))(e,r)}})},created(){Object.defineProperty(this,"$emit",{get:()=>(function(){this.triggerEvent.apply(this,arguments)})})}};function k(e){let t=[j,x,...E,...(e=e||{}).mixins||[],e,s],n=a(t,w);n.methods=n.methods||{},n.methods.$getOption=(()=>n);let{beforeCreate:r}=n;return"function"==typeof r&&r(n),Component(n)}Object.defineProperty(k,"mixin",{get:()=>e=>E.push(e)}),Object.defineProperty(Component,"define",{get:()=>k});Component;let C={created(){Object.defineProperty(this,"$nextTick",{get(){return(e,t)=>m(e,this,t)}})}};var A={install:function e({WeEasyBoth:t}){e.installed||(e.installed=!0,t.mixin(C))}};function S(e){(function(e,t,n){e.forEach(e=>{this.hasOwnProperty(e)||Object.defineProperty(this,e,(e=>({get(){if(t)return t.call(this,e);throw new Error(`Property "${e}" is not readable.`)},set(t){if(n)return n.call(this,e,t);throw new Error(`Property "${e}" is not writable.`)}}))(e))})}).call(this,Object.keys(e),function(e){let{$$proxifyCache:t}=this;return t.hasOwnProperty(e)?t[e]:this.data[e]},function(e,t){let n={};return n[e]=t,this.$$proxifyCache[e]=t,this.setData(n)})}let W={created(){let e={};Object.defineProperty(this,"$$proxifyCache",{get:()=>e});let t=function(e){e=e||this.data,S.call(this,e)}.bind(this);t(),Object.defineProperty(this,"$updateDataProxify",{get:()=>t})},updated(e){let{$$proxifyCache:t}=this;Object.keys(e).forEach(e=>delete t[e]),this.$updateDataProxify(e)}};var T={install:function e({WeEasyBoth:t}){e.installed||(e.installed=!0,t.mixin(W))}};function D(e,t){(function(e){Object.keys(e).forEach(t=>{let n=e[t];if(!n)throw new Error(`Invalid config for watcher "${t}".`);let r=typeof n;if("function"===r?n={handler:n}:"string"===r?n={handler:this[n]}:"string"==typeof n.handler&&(n.handler=this[n.handler]),"function"!=typeof n.handler)throw new Error(`Invalid handler function specified to watcher "${t}".`);e[t]=n})}).call(e,t),Object.defineProperty(this,"target",{get:()=>e}),Object.defineProperty(this,"watch",{get:()=>t});let n={};Object.defineProperty(this,"cache",{get:()=>n})}D.prototype={constructor:D,initialize:function(){let{target:e,cache:t,watch:n}=this,r={},i=!1;Object.keys(n).forEach(o=>{let a=t[o]=e.data[o];n[o].immediate&&(i=!0,r[o]=a)}),i&&this.invoke(r,!0)},invoke(e,t=!1){let n=Object.keys(e||{}),{target:r,cache:i,watch:o}=this;n&&n.forEach(n=>{if(!o.hasOwnProperty(n))return;let a=i[n],c=e[n];(t||void 0!==g(c,a))&&(i[n]=c,o[n].handler.call(r,c,a))})}};let B={beforeCreate(e){let{watch:t}=e;if(void 0!==t&&"object"!=typeof t)throw new Error('The "watch" option should be an object.')},beforeMount(){let{watch:e}=this.$getOption();if(!e)return;let t=new D(this,e);Object.defineProperty(this,"$$watcher",{get:()=>t}),t.initialize()},updated(e){let{$$watcher:t}=this;t&&t.invoke(e,!0)}};var M={install:function e({WeEasyBoth:t}){e.installed||(e.installed=!0,t.mixin(B))}};function _(e,t){Object.defineProperty(this,"target",{get:()=>e}),Object.defineProperty(this,"compute",{get:()=>t})}_.prototype.isSelfUpdate=function(e){let{cache:t}=this;return t&&e&&(e=Object.assign({},e),Object.keys(t).forEach(t=>delete e[t])),void 0===g(e,t)},_.prototype.invoke=function(e,t=!1){let{target:n,compute:r,cache:i}=this,o=function(e,t){let n=e.call(this,t);if(!n||"object"!=typeof n)throw new Error('The "compute" method should return a non-null object.');return n}.call(n,r,e);void 0!==g(o,i)&&(this.cache=o,n.setData(o,null,!!t))};let U={beforeCreate(e){let{compute:t}=e;if(void 0!==t&&"function"!=typeof t)throw new Error('The "compute" option should be a method.')},mounted(){let{compute:e}=this.$getOption();if(!e)return;let t=new _(this,e);Object.defineProperty(this,"$$computer",{get:()=>t}),t.invoke(this.data,!0)},updated(e){let{$$computer:t}=this;t&&(t.isSelfUpdate(e)||t.invoke(this.data))}};var z={install:function e({WeEasyBoth:t}){e.installed||(e.installed=!0,t.mixin(U))}};n.d(t,"WeEasyApp",function(){return h}),n.d(t,"WeEasyPage",function(){return $}),n.d(t,"WeEasyComponent",function(){return k});const I={};Object.defineProperty(I,"mixin",{get:()=>e=>{$.mixin(e),k.mixin(e)}});const L={WeEasyApp:h,WeEasyBoth:I,WeEasyPage:$,WeEasyComponent:k};Object.defineProperty(L,"use",{get(){return e=>{if(e&&"object"==typeof e&&(e=e.install),"function"!=typeof e)throw new Error("Invalid plugin value.");e(this)}}}),L.use(A),L.use(T),L.use(z),L.use(M);t.default=L}])});
//# sourceMappingURL=we-easy.js.map