!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e,t){return Object.assign({},e,t)},i=function(e,t){let n=[e,t].filter(Boolean);return n.length?(n.forEach(e=>{if(e&&"function"!=typeof e)throw new Error('The "compute" property value must be a function.')}),function(){let e=Array.from(arguments);return n.reduce((t,n)=>{let r=n.apply(this,e);if(r){if("object"!=typeof r)throw new Error('The "compute" function must return an object value.');t=Object.assign(t,r)}return t},{})}):()=>{}},o=function(e,t){return function(){let n=arguments,r=e=>{let t=typeof e;if("function"===t)return e.apply(this,n);if("string"===t)return r(this[t]);if(Array.isArray(e)){let t;return e.forEach(e=>t=r(e)),t}},i=[];return t&&i.push(t),e&&i.push(e),r(i)}};function a(e,t){return Object.keys(t).forEach(n=>{let a=t[n];"compute"===n?e[n]=i(a,e[n]):"function"==typeof a?e[n]=o(a,e[n]):"object"==typeof a&&(e[n]=r(a,e[n]))}),e}function c(e,t){return e=Object.assign({},e),t&&Object.keys(t).forEach(n=>{let r=e[n];if(void 0!==r){let i=t[n];e[i]=r,delete e[n]}}),e}var s=function(e,t,n){let r={};return t&&t.forEach(e=>a(r,c(e,n))),a(r,c(e,n)),r};const f=new Set(["string","number","boolean","undefined","symbol"]),u=new Set([null]);function l(e){return f.has(typeof e)||u.has(e)}function h(e,t,n=!0){if(l(e)||l(t))return function(e,t){return e===t?void 0:e}(e,t);if(Array.isArray(e)||Array.isArray(t))return function(e,t,n){if(!e||!t)return e;if(e.length!==t.length)return e;let r=Object.keys(e),i=new Set(Object.keys(t));return r.length!=i.size?e:r.every(r=>!!i.has(r)&&void 0===h(e[r],t[r],n))?void 0:e}(e,t,n);let r={},i=!1;return Object.keys(e).forEach(o=>{let a=e[o],c=t[o];a!==c&&(n&&void 0===h(a,c,!0)||(i=!0,r[o]=a))}),i?r:void 0}var p=h;function d(e,t){return setTimeout(n=>e.call(t),0)}let y=0;var b=function(){let e=++y;Object.defineProperty(this,"$uid",{get:()=>e});let{$getOption:t,setData:n}=this;if(!t||!n)return;let{beforeMount:r,beforeUpdate:i,updated:o}=this.$getOption(),a=null,c=e=>{o&&(e=e||this.$getMergedData(),a||(a={},d(e=>{let t=a;a=null,o.call(this,t)})),Object.assign(a,e))};Object.defineProperty(this,"$notifyUpdated",{get:()=>c});let s=(e,t)=>{i&&i.call(this,e),n.call(this,e,t),this.$updateDataProxify&&this.$updateDataProxify(e),c(e)},f=null,u=[],l=(e,t)=>{f||(f={},d(e=>{let t=f,n=u;f=null,u=[];let r=p(t,this.data);void 0!==r&&s(r,function(){let e=arguments;n.forEach(t=>t.apply(this,e))}.bind(this))})),Object.assign(f,e),t&&u.push(t)};Object.defineProperty(this,"setData",{get(){return function(e,t,n=!1){e&&(n?s:l)(e,t)}.bind(this)}})},g=function(){if(!this.$getOption)return;let{mounted:e}=this.$getOption();e&&e.call(this)};const m={created:"onLoad"},j=[];function O(e){(e=e||{}).mixins=[{onLoad:b,onReady:g},...j,...e.mixins||[]];let t=s(e,e.mixins,m),{methods:n}=t;n&&delete(t={...t,...n}).methods,t.$getOption=(()=>t),t.$getMergedData=function(){return Object.assign({},this.data)};let{beforeCreate:r}=t;return"function"==typeof r&&r(t),Page(t)}Object.defineProperty(O,"mixin",{get:()=>e=>j.push(e)}),Object.defineProperty(Page,"define",{get:()=>O});Page;const v={props:"properties"},w=[];function P(e){(e=e||{}).mixins=[{attached:b,ready:g},{created(){Object.defineProperty(this,"$emit",{get:()=>(function(){this.triggerEvent.apply(this,arguments)})})}},{beforeCreate(e){let{properties:t,watch:n,compute:r}=e;t&&(n||r)&&Object.keys(t).forEach(e=>{let n=t[e];if(n){"object"!=typeof n&&(n=t[e]={type:n});let{observer:r}=n;n.observer=((e,t)=>(function(n){"string"==typeof t&&(t=this[t]),t&&t.apply(this,arguments);let r={};r[e]=n,this.$notifyUpdated&&this.$notifyUpdated(r)}))(e,r)}})}},...w,...e.mixins||[]];let t=s(e,e.mixins,v);t.methods=t.methods||{},t.methods.$getOption=(()=>t),t.methods.$getMergedData=function(){return Object.assign({},this.properties,this.data)};let{beforeCreate:n}=t;return"function"==typeof n&&n(t),Component(t)}Object.defineProperty(P,"mixin",{get:()=>e=>w.push(e)}),Object.defineProperty(Component,"define",{get:()=>P});Component;var $={install:function e({WeEasyPage:t,WeEasyComponent:n}){if(e.installed)return;e.installed=!0;let r={created(){Object.defineProperty(this,"$nextTick",{get(){return e=>d(e.call(this))}})}};t.mixin(r),n.mixin(r)}};function E(e,t,n){e.forEach(e=>{this.hasOwnProperty(e)||Object.defineProperty(this,e,(e=>({get(){if(t)return t.call(this,e);throw new Error(`Property "${e}" is not readable.`)},set(t){if(n)return n.call(this,e,t);throw new Error(`Property "${e}" is not writable.`)}}))(e))})}function x(e=!1){return{created(){let t={};Object.defineProperty(this,"$$proxifyCache",{get:()=>t});let n=function(e){e=e||this.data,function(e){E.call(this,Object.keys(e),function(e){let{$$proxifyCache:t}=this;return t.hasOwnProperty(e)?t[e]:this.data[e]},function(e,t){let n={};return n[e]=t,this.$$proxifyCache[e]=t,this.setData(n)})}.call(this,e)}.bind(this);n(),Object.defineProperty(this,"$updateDataProxify",{get:()=>n}),e&&function(){E.call(this,Object.keys(this.properties),function(e){return this.properties[e]})}.call(this)},updated(e){let{$$proxifyCache:t}=this;Object.keys(e).forEach(e=>delete t[e]),this.$updateDataProxify(e)}}}var k={install:function e({WeEasyPage:t,WeEasyComponent:n}){e.installed||(e.installed=!0,t.mixin(x()),n.mixin(x(!0)))}};function C(e,t){Object.defineProperty(this,"target",{get:()=>e}),Object.defineProperty(this,"compute",{get:()=>t})}function W(){return{beforeCreate(e){let{compute:t}=e;if(void 0!==t&&"function"!=typeof t)throw new Error('The "compute" option should be a method.')},mounted(){let{compute:e}=this.$getOption();if(!e)return;let t=new C(this,e);Object.defineProperty(this,"$$computer",{get:()=>t}),t.invoke(this.$getMergedData(),!0)},updated(e){let{$$computer:t}=this;t&&(t.isSelfUpdate(e)||t.invoke(this.$getMergedData()))}}}C.prototype.isSelfUpdate=function(e){let{cache:t}=this;return t&&e&&(e=Object.assign({},e),Object.keys(t).forEach(t=>delete e[t])),void 0===p(e,t)},C.prototype.invoke=function(e,t=!1){let{target:n,compute:r,cache:i}=this,o=function(e,t){let n=e.call(this,t);if(!n||"object"!=typeof n)throw new Error('The "compute" method should return a non-null object.');return n}.call(n,r,e);void 0!==p(o,i)&&(this.cache=o,n.setData(o,null,!!t))};var D={install:function e({WeEasyPage:t,WeEasyComponent:n}){e.installed||(e.installed=!0,t.mixin(W()),n.mixin(W()))}};function M(e,t){(function(e){Object.keys(e).forEach(t=>{let n=e[t];if(!n)throw new Error(`Invalid config for watcher "${t}".`);let r=typeof n;if("function"===r?n={handler:n}:"string"===r?n={handler:this[n]}:"string"==typeof n.handler&&(n.handler=this[n.handler]),"function"!=typeof n.handler)throw new Error(`Invalid handler function specified to watcher "${t}".`);e[t]=n})}).call(e,t),Object.defineProperty(this,"target",{get:()=>e}),Object.defineProperty(this,"watch",{get:()=>t});let n={};Object.defineProperty(this,"cache",{get:()=>n})}function S(){return{beforeCreate(e){let{watch:t}=e;if(void 0!==t&&"object"!=typeof t)throw new Error('The "watch" option should be an object.')},mounted(){let{watch:e}=this.$getOption();if(!e)return;let t=new M(this,e);Object.defineProperty(this,"$$watcher",{get:()=>t}),t.initialize()},updated(e){let{$$watcher:t}=this;t&&t.invokeWatcher(Object.keys(e))}}}M.prototype.initialize=function(){let{target:e,cache:t,watch:n}=this;Object.keys(n).forEach(n=>{t[n]=e[n]});let r=Object.keys(n).filter(e=>n[e].immediate);r&&this.invokeWatcher(r,!0)},M.prototype.invokeWatcher=function(e,t=!1){let{target:n,cache:r,watch:i}=this;e&&e.forEach(e=>{if(!i.hasOwnProperty(e))return;let o=r[e],a=n[e];(t||void 0!==p(a,o))&&(r[e]=a,i[e].handler.call(n,a,o))})};var T={install:function e({WeEasyPage:t,WeEasyComponent:n}){e.installed||(e.installed=!0,t.mixin(S()),n.mixin(S()))}};n.d(t,"WeEasyPage",function(){return O}),n.d(t,"WeEasyComponent",function(){return P});const A={WeEasyPage:O,WeEasyComponent:P};Object.defineProperty(A,"use",{get(){return e=>{if(e&&"object"==typeof e&&(e=e.install),"function"!=typeof e)throw new Error("Invalid plugin value.");e(this)}}}),A.use($),A.use(k),A.use(D),A.use(T);t.default=A}])});
//# sourceMappingURL=we-easy.js.map