{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///d:/.workspace/.open/we-easy/src/merge/object.js","webpack:///d:/.workspace/.open/we-easy/src/merge/compute.js","webpack:///d:/.workspace/.open/we-easy/src/merge/function.js","webpack:///d:/.workspace/.open/we-easy/src/mixin/index.js","webpack:///d:/.workspace/.open/we-easy/src/base/handle-mounted.js","webpack:///d:/.workspace/.open/we-easy/src/app.js","webpack:///d:/.workspace/.open/we-easy/src/diff/primitive.js","webpack:///d:/.workspace/.open/we-easy/src/diff/index.js","webpack:///d:/.workspace/.open/we-easy/src/utils/index.js","webpack:///d:/.workspace/.open/we-easy/src/base/handle-created.js","webpack:///d:/.workspace/.open/we-easy/src/page.js","webpack:///d:/.workspace/.open/we-easy/src/component.js","webpack:///d:/.workspace/.open/we-easy/src/plugin/next-tick.js","webpack:///d:/.workspace/.open/we-easy/src/plugin/data-proxify.js","webpack:///d:/.workspace/.open/we-easy/src/plugin/data-computed.js","webpack:///d:/.workspace/.open/we-easy/src/plugin/data-watcher.js","webpack:///d:/.workspace/.open/we-easy/src/index.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","x","y","assign","merge_compute","array","filter","Boolean","length","forEach","fn","Error","args","Array","from","arguments","reduce","res","computed","apply","this","merge_function","invoke","type","isArray","result","push","mixinOne","obj","mixin","keys","remapProps","map","prop","mapKey","src_mixin","mixins","propsMap","handle_mounted","$getOption","mounted","propMap","created","launched","globalMixins","app","wx","defineProperties","$pages","getCurrentPages","$page","pop","$$mounted","WeEasyApp","options","onShow","opt","methods","beforeCreate","App","primitiveTypes","Set","primitiveObjects","isPrimitive","has","diff","data","target","deep","primitiveDiff","kset","size","every","arrayDiff","hasDiff","vd","vt","src_diff","nextTick","action","context","callback","setTimeout","$","uid","handle_created","myuid","setData","beforeMount","beforeUpdate","updated","updatedDataCache","notifyUpdated","syncSetData","$updateDataProxify","setDataCache","setDataCallbacks","asyncSetData","callbacks","delta","cb","[object Object]","immediate","page_propMap","page_globalMixins","page_WeEasyPage","onLoad","onReady","Page","component_propMap","props","component_globalMixins","component_WeEasyComponent","attached","ready","triggerEvent","properties","watch","compute","observer","nv","$notifyUpdated","Component","next_tick","install","WeEasyPage","WeEasyComponent","installed","dataProxify_Data","propNames","setter","$$proxifyCache","cache","createMixin","updateDataProxify","data_proxify","data_proxify_install","Computer","data_computed_createMixin","computer","$$computer","isSelfUpdate","data_computed","data_computed_install","Watcher","item","handler","data_watcher_createMixin","watcher","initialize","$$watcher","invokeByData","constructor","immediates","hasImmediates","val","force","ov","invokeWatcher","data_watcher","data_watcher_install","__webpack_exports__","WeEasy","plugin","use"],"mappings":"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","file":"we-easy.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function(x, y) {\r\n  return Object.assign({}, x, y)\r\n}\r\n","export default function(x, y) {\r\n  let array = [x, y].filter(Boolean)\r\n  if (!array.length) return () => {};\r\n\r\n  array.forEach(fn => {\r\n    if (fn && typeof(fn) !== 'function') {\r\n      throw new Error('The \"compute\" property value must be a function.')\r\n    }\r\n  })\r\n\r\n  return function() {\r\n    let args = Array.from(arguments)\r\n    return array.reduce((res, fn) => {\r\n      let computed = fn.apply(this, args)\r\n      if (computed) {\r\n        if (typeof(computed) !== 'object') {\r\n          throw new Error('The \"compute\" function must return an object value.')\r\n        }\r\n        res = Object.assign(res, computed)\r\n      }\r\n\r\n      return res\r\n    }, {})\r\n  }\r\n}\r\n","export default function(x, y) {\r\n  return function() {\r\n    let args = arguments\r\n\r\n    let invoke = fn => {\r\n      let type = typeof(fn)\r\n      if (type === 'function') {\r\n        return fn.apply(this, args)\r\n      } else if (type === 'string') {\r\n        return invoke(this[type])\r\n      } else if (Array.isArray(fn)) {\r\n        let result;\r\n        fn.forEach(x => (result = invoke(x)))\r\n        return result;\r\n      }\r\n    }\r\n\r\n    let array = []\r\n    y && array.push(y)\r\n    x && array.push(x)\r\n\r\n    return invoke(array)\r\n  }\r\n}\r\n","import { mergeObject, mergeCompute, mergeFunction } from '../merge/index'\r\n\r\nfunction mixinOne(obj, mixin) {\r\n  Object.keys(mixin).forEach(key => {\r\n    let value = mixin[key]\r\n    if (key === 'compute') {\r\n      obj[key] = mergeCompute(value, obj[key])\r\n    } else if (typeof(value) === 'function') {\r\n      obj[key] = mergeFunction(value, obj[key])\r\n    } else if (typeof(value) === 'object') {\r\n      obj[key] = mergeObject(value, obj[key])\r\n    }\r\n  })\r\n\r\n  return obj\r\n}\r\n\r\n\r\nfunction remapProps(obj, map) {\r\n  obj = Object.assign({}, obj)\r\n  if (map) {\r\n    Object.keys(map).forEach(key => {\r\n      let prop = obj[key]\r\n      if (prop !== void (0)) {\r\n        let mapKey = map[key]\r\n        obj[mapKey] = prop\r\n        delete obj[key]\r\n      }\r\n    })\r\n  }\r\n\r\n  return obj\r\n}\r\n\r\nexport default function(obj, mixins, propsMap) {\r\n  let result = {}\r\n  mixins && mixins.forEach(x => mixinOne(result, remapProps(x, propsMap)))\r\n  mixinOne(result, remapProps(obj, propsMap))\r\n\r\n  return result;\r\n}\r\n","export default function() {\r\n  if (!this.$getOption) return;\r\n\r\n  let { mounted } = this.$getOption()\r\n  mounted && mounted.call(this)\r\n}\r\n","// global App\r\n\r\nimport mixin from './mixin/index'\r\n// import handleCreated from './base/handle-created'\r\nimport handleMounted from './base/handle-mounted'\r\n// import object from './merge/object';\r\n\r\nconst propMap = {\r\n  'created': 'onLaunch',\r\n  'launched': 'onLaunch',\r\n}\r\n\r\nconst globalMixins = []\r\n\r\nfunction created() {\r\n  let app = this\r\n  Object.defineProperty(wx, '$app', {\r\n    get() { return app }\r\n  })\r\n  Object.defineProperties(this, {\r\n    $pages: {\r\n      get() { return getCurrentPages() }\r\n    },\r\n    $page: {\r\n      get() { return getCurrentPages().pop() }\r\n    }\r\n  })\r\n}\r\n\r\nfunction mounted() {\r\n  if (!this.$$mounted) {\r\n    Object.defineProperty(this, '$$mounted', {\r\n      get() { return true }\r\n    })\r\n    handleMounted.call(this)\r\n  }\r\n}\r\n\r\nexport function WeEasyApp(options) {\r\n  options = options || {}\r\n  options.mixins = [\r\n    {\r\n      created,\r\n      onShow: mounted\r\n    },\r\n    ...globalMixins,\r\n    ...(options.mixins || [])\r\n  ]\r\n\r\n  let opt = mixin(options, options.mixins, propMap)\r\n  let { methods } = opt\r\n  if (methods) {\r\n    opt = { ...opt, ...methods }\r\n    delete opt.methods\r\n  }\r\n\r\n  opt.$getOption = () => opt\r\n\r\n  let { beforeCreate } = opt\r\n  if (typeof(beforeCreate) === 'function') {\r\n    beforeCreate(opt)\r\n  }\r\n\r\n  return App(opt)\r\n}\r\n\r\nObject.defineProperty(WeEasyApp, 'mixin', {\r\n  get() {\r\n    return mixin => globalMixins.push(mixin)\r\n  }\r\n})\r\n\r\nObject.defineProperty(App, 'define', {\r\n  get() { return WeEasyApp }\r\n})\r\n\r\nexport default App\r\n","// string, number, boolean, null, undefined, symbol\r\n\r\nconst primitiveTypes = new Set([\r\n  'string',\r\n  'number',\r\n  'boolean',\r\n  'undefined',\r\n  'symbol',\r\n])\r\n\r\nconst primitiveObjects = new Set([\r\n  null,\r\n])\r\n\r\nexport function isPrimitive(value) {\r\n  return primitiveTypes.has(typeof(value)) || primitiveObjects.has(value)\r\n}\r\n","import { isPrimitive } from './primitive'\r\n\r\nfunction primitiveDiff(x, y) {\r\n  return x === y ? void(0) : x\r\n}\r\n\r\nfunction arrayDiff(x, y, deep) {\r\n  if (!x || !y) return x;\r\n  if (x.length !== y.length) return x;\r\n\r\n  let keys = Object.keys(x)\r\n  let kset = new Set(Object.keys(y))\r\n  if (keys.length != kset.size) return x;\r\n\r\n  return keys.every(key => {\r\n    if (!kset.has(key)) return false;\r\n    let valx = x[key]\r\n    let valy = y[key]\r\n\r\n    return diff(valx, valy, deep) === void(0)\r\n  }) ? void(0) : x\r\n}\r\n\r\nfunction diff(data, target, deep = true) {\r\n  if (isPrimitive(data) || isPrimitive(target)) {\r\n    return primitiveDiff(data, target)\r\n  }\r\n  if (Array.isArray(data) || Array.isArray(target)) {\r\n    return arrayDiff(data, target, deep)\r\n  }\r\n\r\n  let res = {}\r\n  let hasDiff = false\r\n  Object.keys(data).forEach(key => {\r\n    let vd = data[key]\r\n    let vt = target[key]\r\n\r\n    if (vd !== vt) {\r\n      if (!deep || diff(vd, vt, true) !== void(0)) {\r\n        hasDiff = true\r\n        res[key] = vd\r\n      }\r\n    }\r\n  })\r\n\r\n  return hasDiff ? res : void(0)\r\n}\r\n\r\nexport default diff\r\n","export function nextTick(action, context, callback) {\r\n  return setTimeout($ => {\r\n    let result = action.call(context)\r\n    callback && callback.call(context, result)\r\n  }, 0)\r\n}\r\n","import diff from '../diff/index'\r\nimport { nextTick } from '../utils/index'\r\n\r\nlet uid = 0\r\n\r\nexport default function() {\r\n  let myuid = ++uid\r\n  Object.defineProperty(this, '$uid', {\r\n    get() { return myuid }\r\n  })\r\n\r\n  let { $getOption, setData } = this\r\n  if (!$getOption || !setData) return;\r\n\r\n  let { beforeMount, beforeUpdate, updated } = this.$getOption()\r\n\r\n  let updatedDataCache = null\r\n  let notifyUpdated = data => {\r\n    if (!updated) return;\r\n\r\n    data = data || this.data\r\n    if (!updatedDataCache) {\r\n      updatedDataCache = {}\r\n      nextTick($ => {\r\n        let data = updatedDataCache\r\n        updatedDataCache = null\r\n        updated.call(this, data)\r\n      })\r\n    }\r\n    Object.assign(updatedDataCache, data)\r\n  }\r\n\r\n  Object.defineProperty(this, '$notifyUpdated', {\r\n    get() { return notifyUpdated }\r\n  })\r\n\r\n  let syncSetData = (data, callback) => {\r\n    beforeUpdate && beforeUpdate.call(this, data)\r\n    setData.call(this, data, callback)\r\n\r\n    this.$updateDataProxify && this.$updateDataProxify(data)\r\n    notifyUpdated(data)\r\n  }\r\n\r\n\r\n  let setDataCache = null\r\n  let setDataCallbacks = []\r\n  let asyncSetData = (data, callback) => {\r\n    if (!setDataCache) {\r\n      setDataCache = {}\r\n      nextTick($ => {\r\n        let data = setDataCache\r\n        let callbacks = setDataCallbacks\r\n\r\n        setDataCache = null\r\n        setDataCallbacks = []\r\n\r\n        let delta = diff(data, this.data)\r\n        if (delta === void(0)) return;\r\n\r\n        syncSetData(delta, (function() {\r\n          let args = arguments\r\n          callbacks.forEach(cb => cb.apply(this, args))\r\n        }).bind(this))\r\n      })\r\n    }\r\n\r\n    Object.assign(setDataCache, data)\r\n    callback && setDataCallbacks.push(callback)\r\n  }\r\n\r\n  Object.defineProperty(this, 'setData', {\r\n    get() {\r\n      return (function(data, callback, immediate = false) {\r\n        data && (immediate ? syncSetData : asyncSetData)(data, callback)\r\n      }).bind(this)\r\n    }\r\n  })\r\n\r\n  // beforeMount && beforeMount.call(this)\r\n}\r\n","// global Page\r\n\r\nimport mixin from './mixin/index'\r\nimport handleCreated from './base/handle-created'\r\nimport handleMounted from './base/handle-mounted'\r\n\r\nconst propMap = {\r\n  'created': 'onLoad',\r\n}\r\n\r\nconst globalMixins = []\r\n\r\nexport function WeEasyPage(options) {\r\n  options = options || {}\r\n  options.mixins = [\r\n    {\r\n      onLoad: handleCreated,\r\n      onReady: handleMounted,\r\n    },\r\n    ...globalMixins,\r\n    ...(options.mixins || [])\r\n  ]\r\n\r\n  let opt = mixin(options, options.mixins, propMap)\r\n  let { methods } = opt\r\n  if (methods) {\r\n    opt = { ...opt, ...methods }\r\n    delete opt.methods\r\n  }\r\n\r\n  opt.$getOption = () => opt\r\n\r\n  let { beforeCreate } = opt\r\n  if (typeof(beforeCreate) === 'function') {\r\n    beforeCreate(opt)\r\n  }\r\n\r\n  return Page(opt)\r\n}\r\n\r\nObject.defineProperty(WeEasyPage, 'mixin', {\r\n  get() {\r\n    return mixin => globalMixins.push(mixin)\r\n  }\r\n})\r\n\r\nObject.defineProperty(Page, 'define', {\r\n  get() { return WeEasyPage }\r\n})\r\n\r\nexport default Page\r\n","// global Component\r\n\r\nimport mixin from './mixin/index'\r\nimport handleCreated from './base/handle-created'\r\nimport handleMounted from './base/handle-mounted'\r\n\r\nconst propMap = {\r\n  'props': 'properties',\r\n}\r\n\r\nconst globalMixins = []\r\n\r\nfunction createObservePropsMixin() {\r\n  return {\r\n    beforeCreate(opt) {\r\n      let { properties: props, watch, compute } = opt\r\n      if (props && (watch ||compute)) {\r\n        Object.keys(props).forEach(key => {\r\n          let prop = props[key]\r\n          if (prop) {\r\n            if (typeof(prop) !== 'object') prop = props[key] = { type: prop };\r\n            let { observer } = prop\r\n\r\n            prop.observer = ((key, observer) => function(nv) {\r\n              if (typeof(observer) === 'string') observer = this[observer];\r\n              observer && observer.apply(this, arguments)\r\n\r\n              let data = {}\r\n              data[key] = nv\r\n              this.$notifyUpdated && this.$notifyUpdated(data)\r\n\r\n            })(key, observer)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function WeEasyComponent(options) {\r\n  options = options || {}\r\n  options.mixins = [\r\n    {\r\n      attached: handleCreated,\r\n      ready: handleMounted,\r\n    },\r\n    {\r\n      created() {\r\n        Object.defineProperty(this, '$emit', {\r\n          get() {\r\n            return function() {\r\n              this.triggerEvent.apply(this, arguments)\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    createObservePropsMixin(),\r\n    ...globalMixins,\r\n    ...(options.mixins || [])\r\n  ]\r\n\r\n  let opt = mixin(options, options.mixins, propMap)\r\n  opt.methods = opt.methods || {}\r\n\r\n  opt.methods.$getOption = () => opt\r\n\r\n  let { beforeCreate } = opt\r\n  if (typeof(beforeCreate) === 'function') {\r\n    beforeCreate(opt)\r\n  }\r\n\r\n  return Component(opt)\r\n}\r\n\r\nObject.defineProperty(WeEasyComponent, 'mixin', {\r\n  get() {\r\n    return mixin => globalMixins.push(mixin)\r\n  }\r\n})\r\n\r\nObject.defineProperty(Component, 'define', {\r\n  get() { return WeEasyComponent }\r\n})\r\n\r\nexport default Component\r\n","import { nextTick } from '../utils/index'\r\n\r\nfunction install({ WeEasyPage, WeEasyComponent }) {\r\n  if (install.installed) return;\r\n  install.installed = true\r\n\r\n  let mixin = {\r\n    created() {\r\n      Object.defineProperty(this, '$nextTick', {\r\n        get() { return (action, callback) => nextTick(action, this, callback) }\r\n      })\r\n    }\r\n  }\r\n\r\n  WeEasyPage.mixin(mixin)\r\n  WeEasyComponent.mixin(mixin)\r\n}\r\n\r\nexport default {\r\n  install\r\n}\r\n","function dataProxify(propNames, getter, setter) {\r\n  propNames.forEach(prop => {\r\n    if (this.hasOwnProperty(prop)) return;\r\n\r\n    Object.defineProperty(this, prop, (prop => ({\r\n      get() {\r\n        if (getter) return getter.call(this, prop)\r\n        throw new Error(`Property \"${prop}\" is not readable.`)\r\n      },\r\n      set(value) {\r\n        if (setter) return setter.call(this, prop, value)\r\n        throw new Error(`Property \"${prop}\" is not writable.`)\r\n      }\r\n    }))(prop))\r\n  })\r\n}\r\n\r\nfunction dataProxify_Data(data) {\r\n  dataProxify.call(\r\n    this,\r\n    Object.keys(data),\r\n    function(prop) {\r\n      let { $$proxifyCache: cache } = this\r\n      if (cache.hasOwnProperty(prop)) {\r\n        return cache[prop]\r\n      } else {\r\n        return this.data[prop]\r\n      }\r\n    },\r\n    function(prop, value) {\r\n      let data = {}\r\n      data[prop] = value\r\n      this.$$proxifyCache[prop] = value\r\n      return this.setData(data)\r\n    }\r\n  )\r\n}\r\n\r\nfunction createMixin() {\r\n  return {\r\n    created() {\r\n      // console.log('proxify mounted')\r\n      let cache = {}\r\n      Object.defineProperty(this, '$$proxifyCache', {\r\n        get() { return cache }\r\n      })\r\n\r\n      let updateDataProxify = (function (data) {\r\n        data = data || this.data\r\n        dataProxify_Data.call(this, data)\r\n      }).bind(this)\r\n\r\n      updateDataProxify()\r\n      Object.defineProperty(this, '$updateDataProxify', {\r\n        get() { return updateDataProxify }\r\n      })\r\n    },\r\n    updated(data) {\r\n      let { $$proxifyCache: cache } = this\r\n      Object.keys(data).forEach(key => (delete cache[key]))\r\n      this.$updateDataProxify(data)\r\n    },\r\n  }\r\n}\r\n\r\nfunction install({ WeEasyPage, WeEasyComponent }) {\r\n  if (install.installed) return;\r\n  install.installed = true\r\n\r\n  WeEasyPage.mixin(createMixin())\r\n  WeEasyComponent.mixin(createMixin())\r\n}\r\n\r\nexport default {\r\n  install\r\n}\r\n","import diff from '../diff/index'\r\n\r\nfunction computeData(compute, data) {\r\n  // console.log('computing', this.$uid)\r\n  let res = compute.call(this, data)\r\n  if (!res || typeof(res) !== 'object') {\r\n    throw new Error('The \"compute\" method should return a non-null object.')\r\n  }\r\n\r\n  return res\r\n}\r\n\r\nfunction Computer(target, compute) {\r\n  Object.defineProperty(this, 'target', {\r\n    get() { return target }\r\n  })\r\n  Object.defineProperty(this, 'compute', {\r\n    get() { return compute }\r\n  })\r\n}\r\n\r\nComputer.prototype.isSelfUpdate = function(data) {\r\n  let { cache } = this\r\n  if (cache && data) {\r\n    data = Object.assign({}, data)\r\n    Object.keys(cache).forEach(key => (delete data[key]))\r\n  }\r\n\r\n  return diff(data, cache) === void(0)\r\n}\r\n\r\nComputer.prototype.invoke = function(data, immediate = false) {\r\n  let { target, compute, cache } = this\r\n\r\n  let computed = computeData.call(target, compute, data)\r\n  if (diff(computed, cache) === void(0)) return;\r\n\r\n  this.cache = computed\r\n  target.setData(computed, null, !!immediate)\r\n}\r\n\r\nfunction createMixin() {\r\n  return {\r\n    beforeCreate(opt) {\r\n      let { compute } = opt\r\n      if (compute !== void(0)) {\r\n        if (typeof(compute) !== 'function')\r\n          throw new Error('The \"compute\" option should be a method.')\r\n      }\r\n    },\r\n    mounted() {\r\n      // console.log('computed mounted')\r\n      let { compute } = this.$getOption()\r\n      if (!compute) return;\r\n\r\n      let computer = new Computer(this, compute)\r\n      Object.defineProperty(this, '$$computer', {\r\n        get() { return computer }\r\n      })\r\n\r\n      computer.invoke(this.data, true)\r\n    },\r\n    updated(data) {\r\n      let { $$computer: computer } = this\r\n      if (!computer) return;\r\n      if (computer.isSelfUpdate(data)) return;\r\n\r\n      computer.invoke(this.data)\r\n    }\r\n  }\r\n}\r\n\r\nfunction install({ WeEasyPage, WeEasyComponent }) {\r\n  if (install.installed) return;\r\n  install.installed = true\r\n\r\n  WeEasyPage.mixin(createMixin())\r\n  WeEasyComponent.mixin(createMixin())\r\n}\r\n\r\nexport default {\r\n  install\r\n}\r\n","import diff from '../diff/index'\r\nimport { nextTick } from '../utils/index'\r\n\r\nfunction normalize(watch) {\r\n  Object.keys(watch).forEach(key => {\r\n    let item = watch[key]\r\n    if (!item) {\r\n      throw new Error(`Invalid config for watcher \"${key}\".`)\r\n    }\r\n\r\n    let type = typeof(item)\r\n    if (type === 'function') {\r\n      item = { handler: item }\r\n    } else if (type === 'string') {\r\n      item = { handler: this[item] }\r\n    } else if (typeof(item.handler) === 'string') {\r\n      item.handler = this[item.handler]\r\n    }\r\n\r\n    if (typeof(item.handler) !== 'function') {\r\n      throw new Error(`Invalid handler function specified to watcher \"${key}\".`)\r\n    }\r\n\r\n    watch[key] = item\r\n  })\r\n}\r\n\r\nfunction Watcher(target, watch) {\r\n  normalize.call(target, watch)\r\n  Object.defineProperty(this, 'target', {\r\n    get() { return target }\r\n  })\r\n\r\n  Object.defineProperty(this, 'watch', {\r\n    get() { return watch }\r\n  })\r\n\r\n  let cache = {}\r\n  Object.defineProperty(this, 'cache', {\r\n    get() { return cache }\r\n  })\r\n}\r\n\r\nWatcher.prototype = {\r\n  constructor: Watcher,\r\n  initialize: function () {\r\n    let { target, cache, watch } = this\r\n\r\n    let immediates = {}\r\n    let hasImmediates = false\r\n    Object.keys(watch).forEach(key => {\r\n      let val = cache[key] = target.data[key]\r\n      if (watch[key].immediate) {\r\n        hasImmediates = true\r\n        immediates[key] = val\r\n      }\r\n    })\r\n\r\n    if (hasImmediates) {\r\n      nextTick($ => this.invokeByData(immediates, true))\r\n    }\r\n  },\r\n  invokeByData(data, force = false) {\r\n    let keys = Object.keys(data || {})\r\n    let { target, cache, watch } = this\r\n\r\n    keys && keys.forEach(key => {\r\n      if (!watch.hasOwnProperty(key)) return;\r\n\r\n      let ov = cache[key]\r\n      let nv = data[key]\r\n\r\n      if (force || diff(nv, ov) !== void (0)) {\r\n        cache[key] = nv\r\n        watch[key].handler.call(target, nv, ov)\r\n      }\r\n    })\r\n  },\r\n  // invokeByKeys(keys, force = false) {\r\n  //   let { target } = this\r\n  //   let data = keys.reduce((res, key) => (res[key] = target.data[key], res), {})\r\n  //   this.invokeByData(data, force)\r\n  // }\r\n}\r\n\r\nWatcher.prototype.invokeWatcher = function(keys, force = false) {\r\n  let { target, cache, watch } = this\r\n  keys && keys.forEach(key => {\r\n    if (!watch.hasOwnProperty(key)) return;\r\n\r\n    let ov = cache[key]\r\n    let nv = target.data[key]\r\n\r\n    if (force || diff(nv, ov) !== void (0)) {\r\n      cache[key] = nv\r\n      watch[key].handler.call(target, nv, ov)\r\n    }\r\n  })\r\n}\r\n\r\nfunction createMixin() {\r\n  return {\r\n    beforeCreate(opt) {\r\n      let { watch } = opt\r\n      if (watch !== void(0)) {\r\n        if (typeof(watch) !== 'object')\r\n          throw new Error('The \"watch\" option should be an object.')\r\n      }\r\n    },\r\n    created() {\r\n      // console.log('watcher created')\r\n      let { watch } = this.$getOption()\r\n      if (!watch) return;\r\n\r\n      let watcher = new Watcher(this, watch)\r\n      Object.defineProperty(this, '$$watcher', {\r\n        get() { return watcher }\r\n      })\r\n\r\n      watcher.initialize()\r\n    },\r\n    updated(data) {\r\n      let { $$watcher: watcher } = this\r\n      watcher && watcher.invokeByData(data)\r\n    }\r\n  }\r\n}\r\n\r\nfunction install({ WeEasyPage, WeEasyComponent }) {\r\n  if (install.installed) return;\r\n  install.installed = true\r\n\r\n  WeEasyPage.mixin(createMixin())\r\n  WeEasyComponent.mixin(createMixin())\r\n}\r\n\r\nexport default {\r\n  install\r\n}\r\n","import { WeEasyApp } from './app'\r\nimport { WeEasyPage } from './page'\r\nimport { WeEasyComponent } from './component'\r\n\r\nimport NextTick from './plugin/next-tick'\r\nimport DataProxify from './plugin/data-proxify'\r\nimport DataComputed from './plugin/data-computed'\r\nimport DataWatcher from './plugin/data-watcher'\r\n\r\nconst WeEasy = {\r\n  WeEasyApp,\r\n  WeEasyPage,\r\n  WeEasyComponent,\r\n}\r\n\r\nObject.defineProperty(WeEasy, 'use', {\r\n  get() {\r\n    return plugin => {\r\n      if (plugin) {\r\n        if (typeof(plugin) === 'object') {\r\n          plugin = plugin.install\r\n        }\r\n      }\r\n      if (typeof(plugin) !== 'function') {\r\n        throw new Error('Invalid plugin value.')\r\n      }\r\n      plugin(this)\r\n    }\r\n  }\r\n})\r\n\r\nWeEasy.use(NextTick)\r\nWeEasy.use(DataProxify)\r\nWeEasy.use(DataComputed)\r\nWeEasy.use(DataWatcher)\r\n\r\nexport {\r\n  WeEasyApp,\r\n  WeEasyPage,\r\n  WeEasyComponent,\r\n}\r\n\r\nexport default WeEasy\r\n"],"sourceRoot":""}